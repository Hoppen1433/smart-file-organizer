#!/bin/bash
# Smart File Organizer - Main Command Interface
# Intelligently organizes your digital files with zero cognitive overhead
# Now with healthcare-enhanced medical file recognition

cd "$(dirname "$0")"

echo "üóÇÔ∏è  Smart File Organizer"
echo ""

if [ "$#" -eq 0 ]; then
    echo "Transform your cluttered folders into organized systems automatically."
    echo ""
    echo "Usage:"
    echo "  ./organize [downloads|folder|healthcare|query|screenshots|subfolders] [options]"
    echo ""
    echo "üöÄ Quick Commands:"
    echo "  ./organize downloads              # Organize Downloads folder"
    echo "  ./organize folder ~/Desktop       # Organize any folder"
    echo "  ./organize healthcare ~/Medical   # Healthcare-enhanced organization"
    echo "  ./organize query 'cardiology 2024' # AI query medical files"
    echo "  ./organize screenshots            # Smart screenshot organization"
    echo "  ./organize subfolders all         # Organize within categories"
    echo ""
    echo "üè• Healthcare Features:"
    echo "  ‚Ä¢ Medical imaging (DICOM, CT, MRI, X-rays)"
    echo "  ‚Ä¢ Laboratory results (CBC, CMP, pathology)"
    echo "  ‚Ä¢ Clinical documentation (H&P, progress notes)"
    echo "  ‚Ä¢ Genomics data (VCF, BAM, FASTQ)"
    echo "  ‚Ä¢ Medication records and research files"
    echo ""
    echo "üí° Add --dry-run to preview changes before organizing"
    echo ""
    exit 0
fi

COMMAND="$1"
shift

case "$COMMAND" in
    "downloads")
        ./scripts/downloads_organizer.py "$@"
        ;;
    "folder")
        if [ "$#" -eq 0 ]; then
            echo "‚ùå Please specify a folder path"
            echo "Usage: ./organize folder <path> [--dry-run]"
            echo "Example: ./organize folder ~/Desktop --dry-run"
        else
            ./scripts/universal_organizer.py "$@"
        fi
        ;;
    "healthcare")
        if [ "$#" -eq 0 ]; then
            echo "‚ùå Please specify a folder path"
            echo "Usage: ./organize healthcare <path> [--dry-run]"
            echo "Example: ./organize healthcare ~/Medical --dry-run"
            echo ""
            echo "üè• Healthcare-Enhanced Organization:"
            echo "   ‚Ä¢ Medical imaging (DICOM, CT, MRI, X-rays)"
            echo "   ‚Ä¢ Laboratory results (CBC, CMP, pathology)"
            echo "   ‚Ä¢ Clinical documentation (H&P, progress notes)"
            echo "   ‚Ä¢ Genomics data (VCF, BAM, FASTQ)"
            echo "   ‚Ä¢ Medication records"
            echo "   ‚Ä¢ Medical research files"
        else
            ./scripts/healthcare_enhanced_organizer.py "$@"
        fi
        ;;
    "query")
        if [ "$#" -eq 0 ]; then
            echo "‚ùå Please specify a query"
            echo "Usage: ./organize query \"search terms\""
            echo "Example: ./organize query \"cardiology files from 2024\""
            echo ""
            echo "üîç Available query types:"
            echo "   ‚Ä¢ Time-based: \"files from 2024\", \"recent lab results\""
            echo "   ‚Ä¢ Category: \"imaging studies\", \"clinical notes\""
            echo "   ‚Ä¢ Medical: \"cardiology\", \"abnormal values\""
            echo ""
            echo "üí° First run: ./organize healthcare ~/Medical to enable queries"
        else
            ./scripts/medical_query_system.py query "$@"
        fi
        ;;
    "screenshots")
        ./scripts/screenshot_organizer.py "$@"
        ;;
    "subfolders")
        ./scripts/subfolder_organizer.py "$@"
        ;;
    "index")
        echo "üîç Indexing medical files for AI queries..."
        ./scripts/medical_query_system.py index
        ;;
    *)
        echo "‚ùå Unknown command: $COMMAND"
        echo "Use ./organize without arguments for help"
        ;;
esac
